"use strict";(function(a,b,c){function d(b){b.preventDefault(),1>a(".EditorWrapper.Open").length?(a(".ButtonSize").removeClass("fa-window-maximize").addClass("fa-window-restore"),a(".EditorWrapper").addClass("Open")):(a(".ButtonSize").removeClass("fa-window-restore").addClass("fa-window-maximize"),a(".EditorWrapper").removeClass("Open")),window.dispatchEvent(new Event("resize"))}function e(b){a(".AceEditorFormatterSettings",b).once("ace_editor_textarea").each(function(b,e){var f=c.inline_formatter_field.ace_editor.setting.theme,g=c.inline_formatter_field.ace_editor.setting.mode,h=c.inline_formatter_field.ace_editor.setting.options,i=window.localStorage.getItem("ace_theme"),j=window.localStorage.getItem("ace_mode");i&&(f=i,a(e).find(".ace-theme-select").val(i)),j&&(g=j,a(e).find(".ace-mode-select").val(j)),Object.keys(h).forEach(function(b){var c=window.localStorage.getItem("ace_".concat(b));c&&(h[b]=c,a(e).find("[data-option-name='".concat(b,"']")).val(c))});var k=ace.edit("AceEditor"),l=c.inline_formatter_field.ace_editor.setting.ace_source;"http://"!==l.substring(0,7)&&"https://"!==l.substring(0,8)&&(l="/"===l[0]?l.substring(1):l,l=l.split("/"),l.pop(),l=l.join("/"),ace.config.set("basePath","".concat(window.location.protocol,"//").concat(window.location.host).concat(c.path.baseUrl).concat(l))),k.setTheme(f),k.getSession().setMode(g),k.getSession().setValue(a(e).find(".AceEditorTextarea").val(),-1),k.getSession().on("change",function(){a(e).find(".AceEditorTextarea").val(k.getSession().getValue())}),Object.keys(h).forEach(function(a){"true"===h[a].toString().toLowerCase()&&(h[a]=!0),"false"===h[a].toString().toLowerCase()&&(h[a]=!1),k.setOption(a,h[a])}),a(".ButtonSize").click(d),a(document).keyup(function(b){"Escape"===b.key&&0<a(".EditorWrapper.Open").length&&d(b)}),a(e).find(".ace-theme-select").on("change",function(a){var b=a.target.value;window.localStorage.setItem("ace_theme",b),k.setTheme(b)}),a(e).find(".ace-mode-select").on("change",function(a){var b=a.target.value;window.localStorage.setItem("ace_mode",b),k.getSession().setMode(b)}),a(e).find(".ace-option-field").on("change",function(b){var c=b.target.value;"true"===c.toString().toLowerCase()&&(c=!0),"false"===c.toString().toLowerCase()&&(c=!1);var d=a(b.target).attr("data-option-name");window.localStorage.setItem("ace_".concat(d),c),k.setOption(d,c)})})}function f(){a(".AceEditorTextarea").css({display:"block"}),a(".EditorWrapper").css({display:"none"})}if(b.behaviors.ace_editor={},"undefined"!=typeof ace)b.behaviors.ace_editor.attach=e;else var g=0,h=setInterval(function(){"undefined"!=typeof ace&&(b.behaviors.ace_editor.attach=e,b.behaviors.ace_editor.attach(),clearInterval(h)),25<g&&(b.behaviors.ace_editor.attach=f,b.behaviors.ace_editor.attach(),clearInterval(h)),g+=1},150)})(jQuery,Drupal,drupalSettings);